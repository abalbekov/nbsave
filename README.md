# mynbconvert custom template

Sometimes it is necessary to distribute final Jupyter Notebook as html report to non-developers. In such report the audience attention will mostly be on generated output and on markdown cells. Code cells may be nice to have, but is of secondary value. In these use cases it would help to have Show/Hide Code button.

In other cases it is necessary to distribute Jupyter Notebook as html file to serve as a "how-to" template with commands for other people to follow. In these cases attention will be on code and markdown text, and the output nice to have but of secondary value. In this scanario it would help to have Show/Hide Output button.

In third use case the html output may serve as a record of what was executed. In this use case it will help to have execution timestamp below code cells, in addition to show/hide code/output buttons.

This nbcovert custom template serves above use cases plus some more.   
The template will:   

- generate html with "classic" Jupyter look and feel
- add hide/show buttons for code and output cells
- add cell execution time taken from cell metadata stored by "executetime" Jupyter extension
- embed markdown cell images into html file as base64 encoded data
- enumerate markdown headings
- adjust REF anchors to match enumerated headings in Table of Content cell generated by "toc2" Jupyter extension.   
(I could not make toc2 extension own exporters and templates work with nbconvert v6+, therefore included this functionality as a workaround)

### Html output example:
<img src="https://github.com/abalbekov/mynbconvert/blob/main/examples/recording_Example_of_using_nbconvert_custom_template.gif" alt="Screenshot" width="800"/>

The custom Jinja2 template name is "custom_template".   
The template extends "classic" html template.   
The template relies on several jinja2 filters implemented as functions in a custom exporter.   
The exporter name is "custom_exporter.AddFilters", implemented in Python package "custom_exporter".   
Therefore nbconvert needs to be called with both "--to" and "--template" parameters :

### Usage example
```
jupyter nbconvert mynotebook.ipynb \
   --to=custom_exporter.AddFilters \
   --template custom_template
```

Works with nbconvert v6+

### To install:
- python3.8 -m pip install git+https://github.com/abalbekov/nbsave.git

This will copy two files: `conf.json` and `index.html.j2`    
Resulting directory tree will look like:
```
%Your-Python-Home%/
└── share/
    └── jupyter/
        └── nbconvert/
            └── templates/
                ├── custom_template
                │   ├── conf.json
                │   └── index.html.j2
                ├── classic
                │   └── ...
               ... <other template subdirectories>
 ```
   
### References:
["How to hide code from cells in ipython notebook visualized with nbviewer?"](https://stackoverflow.com/a/47017746)    
["A Jupyter NBConvert HTML template adding a toggle to hide/show each code cell."](https://gist.github.com/QuentinAndre/75fb32f76720546550f672133969213e)   
["The templating system of nbconvert 6"](https://blog.jupyter.org/the-templating-system-of-nbconvert-6-47ea781eacd2)   
["Custom Templates for Jupyter Notebooks with Jinja2"](https://www.datacamp.com/community/tutorials/jinja2-custom-export-templates-jupyter)  
["nbconvert Documentation Release 6.0.8.dev0"](https://buildmedia.readthedocs.org/media/pdf/nbconvert/latest/nbconvert.pdf)
